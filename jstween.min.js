/*!
 * VERSION: 0.2.0
 * DATE: 2015-09-20
 * GIT:https://github.com/shrekshrek/jstween
 *
 * @author: Shrek.wang, shrekshrek@gmail.com
 **/

!function(t){var n="object"==typeof self&&self.self==self&&self||"object"==typeof global&&global.global==global&&global;"function"==typeof define&&define.amd?define(["exports"],function(i){n.JT=t(n,i)}):"undefined"!=typeof exports?t(n,exports):n.JT=t(n,{})}(function(t,n){function i(t,n){for(var i in n)t[i]=n[i]}function e(t,n){if(void 0===t.length)n.call(t,0,t);else for(var i=0;i<t.length;i++)n.call(t[i],i,t[i])}function r(t){return t.replace(/([A-Z])/g,"-$1").toLowerCase()}function a(t){return t.replace(/\b(\w)|\s(\w)/g,function(t){return t.toUpperCase()})}function s(t){return t?P+a(t):P}function o(t){if(!t)throw"target is undefined, can't tween!!!";return"string"==typeof t?"undefined"==typeof document?t:document.querySelectorAll?document.querySelectorAll(t):document.getElementById("#"===t.charAt(0)?t.substr(1):t):t}function u(t,n){return void 0!==t.style[n]?n:(n=s(n),void 0!==t.style[n]?n:null)}function l(t,n){if("string"==typeof n){var i=n.substr(0,2),e=parseFloat(n.substr(2));switch(i){case"+=":n=t+e;break;case"-=":n=t-e}}return n}function f(t,n){for(var i in O)if(t===O[i])return n;return"number"==typeof n?n+"px":n}function h(t,n){if(t.style[n])return t.style[n];if(document.defaultView&&document.defaultView.getComputedStyle){var i=r(n),e=document.defaultView.getComputedStyle(t,"");return e&&e.getPropertyValue(i)}return t.currentStyle?t.currentStyle[n]:null}function c(t,n){for(var i in n)t.style[i]=n[i]}function v(t){return void 0!==t.style}function p(){S=!0;var t=A.length,n=b.length;if(0===t&&0===n)return void(S=!1);for(var i=I(),e=t-1;e>=0;e--)if(!A[e].update(i)){var r=A.splice(e,1)[0];r.onEnd&&r.onEnd.apply(r.target,r.onEndParams),r.target=null}for(var a=n-1;a>=0;a--)if(!b[a].update(i)){var s=b.splice(a,1)[0];s.onEnd&&s.onEnd.apply(window,s.onEndParams),s.target=null}E(p)}function m(){this.init.apply(this,arguments)}function d(){this.init.apply(this,arguments)}function y(t,n){var i=o(t),r=A.length;e(i,function(t,i){for(var e=r-1;e>=0;e--){var a=A[e];a.target===i&&a[n]()}})}function g(t){for(var n=A.length,i=n-1;i>=0;i--){var e=A[i];e[t]()}}function T(t){for(var n=b.length,i=n-1;i>=0;i--){var e=b[i];e[t]()}}var w=t.JT;n.VERSION="0.1.0",n.noConflict=function(){return t.JT=w,this};var I,M;!function(){Date.now=Date.now||function(){return(new Date).getTime()},M=Date.now(),I=function(){return Date.now()-M}}();var P="";!function(){var t=document.createElement("div"),n=["Webkit","Moz","Ms","O"];for(var i in n)if(n[i]+"Transform"in t.style){P=n[i];break}}();var E=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)};n.requestAnimationFrame=E;var O=["fontWeight","lineHeight","opacity","zoom"],A=[],S=!1;i(m.prototype,{init:function(t,i,e,r,a){this.fromVars=e,this.toVars=r,this.target=t,this.duration=1e3*i,this.ease=r.ease||n.Linear.None,this.repeat=r.repeat||1,this.yoyo=r.yoyo||!1,this.delay=1e3*(r.delay||0),this.onStart=r.onStart||null,this.onStartParams=r.onStartParams||[],this.onIteration=r.onIteration||null,this.onIterationParams=r.onIterationParams||[],this.onEnd=r.onEnd||null,this.onEndParams=r.onEndParams||[],this.onUpdate=r.onUpdate||null,this.onUpdateParams=r.onUpdateParams||[],this.isPlaying=r.isPlaying||!0,this.isReverse=!1,this.isDom=a,this.curTime=0,this.lastTime=I(),this.isStart=!1,this.startTime=this.delay,this.endTime=this.startTime+this.duration,this.restart(),A.unshift(this),S||p()},update:function(t){var n=t-this.lastTime;if(this.lastTime=t,!this.isPlaying)return!0;if(this.curTime+=n,this.curTime<this.startTime)return!0;this.isStart||(this.isStart=!0,this.onStart&&this.onStart.apply(this.target,this.onStartParams));var i=(this.curTime-this.startTime)/this.duration;i=i>1?1:i,this.isReverse&&(i=1-i);var e=parseFloat(this.ease(i));for(var r in this.fromVars){var a=this.fromVars[r],s=this.toVars[r]||0,o=a+(s-a)*e;this.isDom?this.target.style[r]=f(r,o):this.target[r]=o}if(this.onUpdate&&this.onUpdate.apply(this.target,this.onUpdateParams),this.curTime>=this.endTime){if(1==this.repeat)return!1;this.repeat>1&&(this.onIteration&&this.onIteration.apply(this.target,this.onIterationParams),this.repeat--),this.curTime=this.startTime,this.yoyo&&(this.isReverse=!this.isReverse)}return!0},play:function(){this.isPlaying=!0},pause:function(){this.isPlaying=!1},restart:function(){this.curTime=0;for(var t in this.fromVars){var n=this.fromVars[t];this.isDom?this.target.style[t]=f(t,n):this.target[t]=n}},reverse:function(){this.curTime=this.endTime-this.curTime+this.startTime,this.isReverse=!this.isReverse},kill:function(t){var n=A.indexOf(this);if(-1!==n)if(t){var i=A.splice(n,1)[0];i.update(i.endTime-i.curTime+i.lastTime),i.onEnd&&i.onEnd.apply(i.target,i.onEndParams),i.target=null}else{var i=A.splice(n,1)[0];i.update(I()),i.target=null}}});var b=[];return i(d.prototype,{init:function(t,n,i){this.delay=1e3*t,this.onEnd=d||null,this.onEndParams=i||[],this.curTime=0,this.lastTime=I(),this.endTime=this.delay,this.restart(),b.unshift(this),S||p()},update:function(t){var n=t-this.lastTime;return this.lastTime=t,this.isPlaying?(this.curTime+=n,this.curTime<this.endTime?!0:!1):!0},play:function(){this.isPlaying=!0},pause:function(){this.isPlaying=!1},restart:function(){this.curTime=0},kill:function(){var t=b.indexOf(this);if(-1!==t){var n=b.splice(t,1)[0];n.target=null}}}),i(n,{get:function(t,n){var i=o(t);if(void 0!==i.length&&(i=i[0]),v(i)){var e=u(i,n);return e?h(i,e):null}return i[n]},set:function(t,n){var i=o(t);e(i,function(t,i){if(v(i)){var e={};for(var r in n){var a=u(i,r);if(a){var s=parseFloat(h(i,a));e[a]=l(s,n[r]),e[a]=f(a,l(h(i,a),n[r]))}}c(i,e)}else for(var r in n)i[r]=n[r]})},fromTo:function(t,n,i,r){var a=o(t),s=[];return e(a,function(t,e){var a={},o={},u=v(e);for(var f in r)if(u?void 0!==e.style[f]:void 0!==e[f]){var c=u?parseFloat(h(e,f)):e[f];a[f]=l(c,i[f]),o[f]=l(c,r[f])}else o[f]=r[f];var p=new m(e,n,a,o,u);s.push(p)}),1==s.length?s[0]:s},from:function(t,n,i){var r=o(t),a=[];return e(r,function(t,e){var r={},s={},o=v(e);for(var u in i)if(o?void 0!==e.style[u]:void 0!==e[u]){var f=o?parseFloat(h(e,u)):e[u];s[u]=f,r[u]=l(f,i[u])}else s[u]=i[u];var c=new m(e,n,r,s,o);a.push(c)}),1==a.length?a[0]:a},to:function(t,n,i){var r=o(t),a=[];return e(r,function(t,e){var r={},s={},o=v(e);for(var u in i)if(o?void 0!==e.style[u]:void 0!==e[u]){var f=o?parseFloat(h(e,u)):e[u];r[u]=f,s[u]=l(f,i[u])}else s[u]=i[u];var c=new m(e,n,r,s,o);a.push(c)}),1==a.length?a[0]:a},kill:function(t,n){var i=o(t),r=A.length;e(i,function(t,i){for(var e=r-1;e>=0;e--){var a=A[e];a.target===i&&a.kill(n)}})},killAll:function(t){if(!t)return void(A=[]);for(var n=A.length,i=n-1;i>=0;i--){var e=A[i];e.kill(t)}},play:function(t){y(t,"play")},playAll:function(){g("play")},pause:function(t){y(t,"pause")},pauseAll:function(){g("pause")},restart:function(t){y(t,"restart")},restartAll:function(){g("restart")},reverse:function(t){y(t,"reverse")},reverseAll:function(){g("reverse")},call:function(t,n,i){var e=new d(t,n,i);b.push(e)},killAllCalls:function(){for(var t=b.length,n=t-1;n>=0;n--){var i=b[n];i.kill()}},playAllCalls:function(){T("play")},pauseAllCalls:function(){T("pause")},restartAllCalls:function(){T("restart")}}),i(n,{Linear:{None:function(t){return t}},Quad:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quart:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quint:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sine:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Expo:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(-Math.pow(2,-10*(t-1))+2)}},Circ:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){var n,i=.1,e=.4;return 0===t?0:1===t?1:(!i||1>i?(i=1,n=e/4):n=e*Math.asin(1/i)/(2*Math.PI),-(i*Math.pow(2,10*(t-=1))*Math.sin(2*(t-n)*Math.PI/e)))},Out:function(t){var n,i=.1,e=.4;return 0===t?0:1===t?1:(!i||1>i?(i=1,n=e/4):n=e*Math.asin(1/i)/(2*Math.PI),i*Math.pow(2,-10*t)*Math.sin(2*(t-n)*Math.PI/e)+1)},InOut:function(t){var n,i=.1,e=.4;return 0===t?0:1===t?1:(!i||1>i?(i=1,n=e/4):n=e*Math.asin(1/i)/(2*Math.PI),(t*=2)<1?-.5*i*Math.pow(2,10*(t-=1))*Math.sin(2*(t-n)*Math.PI/e):i*Math.pow(2,-10*(t-=1))*Math.sin(2*(t-n)*Math.PI/e)*.5+1)}},Back:{In:function(t){var n=1.70158;return t*t*((n+1)*t-n)},Out:function(t){var n=1.70158;return--t*t*((n+1)*t+n)+1},InOut:function(t){var n=2.5949095;return(t*=2)<1?.5*t*t*((n+1)*t-n):.5*((t-=2)*t*((n+1)*t+n)+2)}},Bounce:{In:function(t){return 1-TWEEN.Easing.Bounce.Out(1-t)},Out:function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return.5>t?.5*TWEEN.Easing.Bounce.In(2*t):.5*TWEEN.Easing.Bounce.Out(2*t-1)+.5}}}),n});
